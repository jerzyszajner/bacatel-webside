const THEME_STORAGE_KEY="bacatel-theme",THEME_LIGHT="light",THEME_DARK="dark";function getSystemPrefersDark(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches}function getEffectiveTheme(){const e=document.documentElement.getAttribute("data-theme");return"light"===e||"dark"===e?e:getSystemPrefersDark()?"dark":"light"}function updateThemeUI(e){document.documentElement.style.colorScheme="dark"===e?"dark":"light";const t=document.getElementById("theme-color");t&&t.setAttribute("content","dark"===e?"#121110":"#f2ede6");const r=document.querySelector(".theme-toggle");r&&(r.setAttribute("aria-label","dark"===e?"Przełącz tryb jasny":"Przełącz tryb ciemny"),r.setAttribute("title","dark"===e?"Tryb jasny":"Tryb ciemny"))}function initTheme(){const e=localStorage.getItem("bacatel-theme");"light"!==e&&"dark"!==e||document.documentElement.setAttribute("data-theme",e),updateThemeUI(getEffectiveTheme())}function toggleTheme(){const e="dark"===getEffectiveTheme()?"light":"dark";document.documentElement.setAttribute("data-theme",e),localStorage.setItem("bacatel-theme",e),updateThemeUI(e)}function initNav(){const e=document.querySelector(".nav-toggle"),t=document.querySelector(".nav");function r(){const t="true"===e.getAttribute("aria-expanded");e.setAttribute("aria-label",t?"Zamknij menu":"Otwórz menu")}e&&t&&(e.addEventListener("click",()=>{const n="true"===e.getAttribute("aria-expanded");e.setAttribute("aria-expanded",!n),t.classList.toggle("is-open"),r()}),t.querySelectorAll(".nav__link").forEach(n=>{n.addEventListener("click",()=>{e.setAttribute("aria-expanded","false"),t.classList.remove("is-open"),r(),e.focus()})}))}const CAROUSEL_INTERVAL=5e3;function initGallery(){const e=document.querySelector(".gallery__track"),t=document.querySelector(".gallery__btn--prev"),r=document.querySelector(".gallery__btn--next");if(!e||!t||!r)return;const n=e.querySelectorAll(".gallery__slide"),o=n.length,c=()=>e.offsetWidth;let i=null;const a=document.querySelector(".gallery__live");let l=-1;function s(e){n.forEach((t,r)=>{r===e?t.setAttribute("aria-current","true"):t.removeAttribute("aria-current")}),a&&e!==l&&(l=e,a.textContent=`Zdjęcie ${e+1} z ${o}`)}function d(t){const r=Math.max(0,Math.min(t,o-1));e.scrollTo({left:r*c(),behavior:"smooth"}),s(r)}function u(){const t=Math.round(e.scrollLeft/c());d(t>=o-1?0:t+1)}function m(){i=setInterval(u,5e3)}function f(){clearInterval(i),m()}t.addEventListener("click",()=>{!function(){const t=Math.round(e.scrollLeft/c());d(t<=0?o-1:t-1)}(),f()}),r.addEventListener("click",()=>{u(),f()}),e.addEventListener("scroll",()=>{s(Math.round(e.scrollLeft/c()))}),m(),s(0)}function scrollToTop(e){e&&e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})}document.addEventListener("DOMContentLoaded",()=>{initTheme();const e=document.querySelector(".theme-toggle");e&&e.addEventListener("click",toggleTheme),initNav(),initGallery();const t=document.querySelector('.logo[href="#top"]');t&&t.addEventListener("click",e=>{e.preventDefault(),scrollToTop(),t.blur()});const r=document.querySelector(".scroll-top");if(r){r.addEventListener("click",e=>{e.preventDefault(),scrollToTop()});const e=()=>{window.scrollY>400?r.classList.add("is-visible"):r.classList.remove("is-visible")};e(),window.addEventListener("scroll",e,{passive:!0})}const n=document.querySelector(".contact-map__iframe[data-src]");if(n&&"IntersectionObserver"in window){const e=new IntersectionObserver(t=>{if(t[0].isIntersecting){const t=n.getAttribute("data-src");t&&(n.setAttribute("src",t),n.removeAttribute("data-src")),e.disconnect()}},{rootMargin:"100px"});e.observe(n)}else if(n){const e=n.getAttribute("data-src");e&&(n.setAttribute("src",e),n.removeAttribute("data-src"))}});